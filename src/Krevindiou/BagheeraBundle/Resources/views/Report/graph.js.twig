$(document).ready(function(){
    {% for graph in graphs %}
    $.jqplot(
        'graph{{ graph.report.reportId }}',
        [
            {% for data in graph.data %}
            [
                {% for x, y in data %}
                    {% if y is not null %}
                        ['{{ x }}', '{{ y }}']{% if loop.last != 1 %},{% endif %}

                    {% endif %}
                {% endfor %}
            ]{% if loop.last != 1 %},{% endif %}

            {% endfor %}
        ],
        {
            axes: {
                xaxis: {
                    renderer: $.jqplot.DateAxisRenderer,
                    tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                    tickOptions: {
                        angle: -30
                    },
                    ticks: [
                    {% for x, y in graph.data[0] %}
                        {% if loop.first == 1 or loop.last == 1 %}
                            ['{{ x }}', '-']
                        {% else %}
                            {% if graph.report.periodGrouping == 'month' %}
                                ['{{ x }}', '{{ x|date("Y-m") }}']
                            {% elseif graph.report.periodGrouping == 'quarter' %}
                                ['{{ x }}', '{{ x|date("Y") }} Q{{ ((x|date("n") - 1) / 3) + 1 }}']
                            {% elseif graph.report.periodGrouping == 'year' %}
                                ['{{ x }}', '{{ x|date("Y") }}']
                            {% else %}
                                ['{{ x }}', Bagheera.translations.report_period_grouping_all]
                            {% endif %}
                        {% endif %}
                        {% if loop.last != 1 %},{% endif %}
                    {% endfor %}
                    ],
                    {% if graph.report.periodGrouping == 'month' %}
                        tickInterval: '1 month'
                    {% elseif graph.report.periodGrouping == 'quarter' %}
                        tickInterval: '3 months'
                    {% elseif graph.report.periodGrouping == 'year' %}
                        tickInterval: '1 year'
                    {% else %}
                        tickInterval: '1 year'
                    {% endif %}
                },
                yaxis:  {
                    tickOptions: {
                        formatString: '%.2f'
                    },
                    min: {{ graph.yaxisMin }},
                    max: {{ graph.yaxisMax }},
                    numberTicks: 6
                }
            },
            highlighter: {
                show: true
            },
            series: [
                {
                    color: "#4bb2c5"
                },
                {
                    color: "#eaa228"
                }
            ]
        }
    );
    {% endfor %}
});
